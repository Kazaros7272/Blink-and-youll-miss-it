<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="author"
      content="LAMMY - Legendary, Awesome, Mind-blowing, Magnetic, Youthful"
    />
    <title>Blink and you'll miss it!</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      .eye-tracking-container {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        margin-top: 20px;
      }
      .eye-tracking-status {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .hidden {
        display: none;
      }
      /* Basic styling for radio options and select */
      #uploadOptionContainer {
        margin-bottom: 10px;
      }
      #uploadOptionContainer label {
        margin-right: 15px;
      }
    </style>
  </head>
  <body>
    <h1>Blink and you'll miss it!</h1>

    <!-- Mode Selection -->
    <div id="mode-selection">
      <h2>Select Quiz Mode</h2>
      <button id="mcqModeBtn" class="submit-btn">Multiple Choice</button>
      <button id="longAnswerModeBtn" class="submit-btn">Long Answer</button>
    </div>

    <!-- Upload Section -->
    <div id="upload-section" class="hidden">
      <h2>Load CSV Data</h2>
      <p id="formatInstructions"></p>

      <!-- The following options are only visible in Long Answer mode -->
      <div id="uploadOptionContainer">
        <input
          type="radio"
          name="sourceType"
          id="uploadOwn"
          value="upload"
          checked
        />
        <label for="uploadOwn">Upload your own file</label>

        <input
          type="radio"
          name="sourceType"
          id="readyMade"
          value="ready-made"
        />
        <label for="readyMade">Choose a ready-made file</label>
      </div>

      <!-- File upload container -->
      <div id="ownFileContainer">
        <input type="file" id="fileInput" accept=".csv" />
      </div>

      <!-- Ready-made file selector container -->
      <div id="readyMadeContainer" class="hidden">
        <select id="readyMadeFileSelect">
          <option value="data1.csv">Geography</option>
          <option value="data2.csv">Math</option>
          <option value="data3.csv">Greek Mythology</option>
          <option value="data4.csv">Blinking</option>
          <option value="data5.csv">Computer Science</option>
        </select>
      </div>

      <button id="uploadBtn">Load Data</button>
    </div>

    <!-- Long Answer Quiz -->
    <div id="quiz-section-long" class="hidden">
      <div class="question-box">
        <p id="questionTextLong" class="question-text"></p>
        <input
          type="text"
          id="userAnswer"
          class="answer-input"
          placeholder="Type your answer here..."
        />
        <button id="submitAnswerLong" class="submit-btn">Submit Answer</button>
      </div>
    </div>

    <!-- MCQ Quiz -->
    <div id="quiz-section-mcq" class="hidden">
      <div class="question-box">
        <p id="questionTextMcq" class="question-text"></p>
        <div id="mcqOptions"></div>
        <button id="submitAnswerMcq" class="submit-btn">Submit Answer</button>
      </div>
    </div>

    <!-- Review Section -->
    <div id="review-section" class="hidden">
      <h2>Review and Self-Assess Your Answers</h2>
      <div id="reviewContainer"></div>
      <button id="submitAssessments" class="next-btn">
        Submit Self-Assessments
      </button>
    </div>

    <!-- Results Section -->
    <div id="results-section" class="hidden">
      <h2>Your Results</h2>
      <div id="resultsContainer"></div>
    </div>

    <!-- Eye tracking section -->
    <div class="eye-tracking-container">
      <div>
        <video id="video" autoplay playsinline muted></video>
        <canvas id="canvas" style="display: none;"></canvas>
      </div>
      <div class="eye-tracking-status">
        <div id="status">Waiting for cameraâ€¦</div>
        <div id="fps">FPS: 0</div>
        <div id="warning"></div>
      </div>
    </div>

    <!-- MediaPipe libraries for face tracking -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="MCQ.js"></script>
  </body>
</html>
